{"mappings":"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","sources":["js/demo.js"],"sourcesContent":["﻿/**\n * @author jbouny / https://github.com/fft-ocean\n */\n\nvar DEMO =\n{\n\tms_Renderer : null,\n\tms_Camera : null,\n\tms_Scene : null,\n\tms_Controls : null,\n\tms_Ocean : null,\n\tms_Environment : \"night\",\n\tms_Raining : false,\n\n\tms_Commands : {\n\t\tstates : {\n\t\t\tup : false,\n\t\t\tright : false,\n\t\t\tdown : false,\n\t\t\tleft : false\n\t\t},\n\t\tmovements : {\n\t\t\tspeed : 0.0,\n\t\t\tangle : 0.0\n\t\t}\n\t},\n\n\tInitialize : function () {\n\n\t\tthis.ms_Renderer = new THREE.WebGLRenderer();\n\t\tthis.ms_Renderer.context.getExtension( 'OES_texture_float' );\n\t\tthis.ms_Renderer.context.getExtension( 'OES_texture_float_linear' );\n\t\tthis.ms_Renderer.setClearColor( 0x000000 );\n\n\t\tdocument.body.appendChild( this.ms_Renderer.domElement );\n\n\t\tthis.ms_Scene = new THREE.Scene();\n\n\t\tthis.ms_GroupShip = new THREE.Object3D();\n\t\tthis.ms_BlackPearlShip = new THREE.Object3D();\n\t\tthis.ms_Scene.add( this.ms_GroupShip );\n\t\tthis.ms_GroupShip.add( this.ms_BlackPearlShip );\n\n\t\tthis.ms_Camera = new THREE.PerspectiveCamera( 55.0, WINDOW.ms_Width / WINDOW.ms_Height, 0.5, 1000000 );\n\t\tthis.ms_Camera.position.set( 0, 350, 800 );\n\t\tthis.ms_Camera.lookAt( new THREE.Vector3() );\n\t\tthis.ms_BlackPearlShip.add( this.ms_Camera );\n\n\t\t// Initialize Orbit control\n\t\tthis.ms_Controls = new THREE.OrbitControls( this.ms_Camera, this.ms_Renderer.domElement );\n\t\tthis.ms_Controls.userPan = false;\n\t\tthis.ms_Controls.target.set( 0, 100.0, 0 );\n\t\tthis.ms_Controls.noKeys = true;\n\t\tthis.ms_Controls.userPanSpeed = 0;\n\t\tthis.ms_Controls.minDistance = 0;\n\t\tthis.ms_Controls.maxDistance = 20000.0;\n\t\tthis.ms_Controls.minPolarAngle = 0;\n\t\tthis.ms_Controls.maxPolarAngle = Math.PI * 0.75;\n\n\t\tthis.InitializeSound();\n\t\tthis.InitializeLoader();\n\t\tthis.InitializeScene();\n\n\t\tthis.InitGui();\n\t\tthis.InitCommands();\n\n\t},\n\t\n\tInitializeSound : function InitializeSound() {\n\t\t\n\t\tvar initSound = function initSound( url ) {\n\t\t\n\t\t\tif ( window.HTMLAudioElement ) {\n\t\t\t\n\t\t\t\tvar sound = new Audio('');\n\n\t\t\t\tif ( sound.canPlayType( 'audio/mp3' ) ) {\n\t\t\t\t\n\t\t\t\t\tvar sound = new Audio( url );\n\t\t\t\t\t\n\t\t\t\t\tsound.addEventListener( 'ended', function() {\n\t\t\t\t\t\tthis.currentTime = 0;\n\t\t\t\t\t\tthis.play();\n\t\t\t\t\t}, false );\n\t\t\t\t\t\n\t\t\t\t\treturn sound;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t};\n\t\t\n\t\tthis.ms_soundWaves = initSound( 'sound/waves.mp3' );\n\t\tthis.ms_soundRain = initSound( 'sound/rain.mp3' );\n\t\t\n\t\tthis.ms_soundWaves.play();\n\t\t\n\t},\n\t\n\tInitializeLoader : function InitializeLoader() {\n\t\n\t\tthis.ms_Loader = new THREE.LoadingManager();\n\t\t\n\t\tvar log = function( message, type, timeout ) {\n\t\t\tconsole.log( message );\n\t\t\tmessg( message, type, timeout );\n\t\t}\n\t\t\n\t\tvar delay = 1500;\n\t\tthis.ms_Loader.onProgress = function( item, loaded, total ) {\n\t\t\tlog( 'Loaded ' + loaded + '/' + total + ':' + item, 'info', delay );\n\t\t};\n\t\tthis.ms_Loader.onLoad = function () {\n\t\t\tlog( 'Loaded.', 'success', delay );\n\t\t};\n\t\tthis.ms_Loader.onError = function () {\n\t\t\tlog( 'Loading error.', 'error', delay );\n\t\t};\n\t\t\n\t\t\n\t\tthis.ms_ImageLoader = new THREE.ImageLoader( this.ms_Loader );\n\t\n\t},\n\n\tInitializeScene : function InitializeScene() {\n\n\t\t// Add light\n\t\tthis.ms_MainDirectionalLight = new THREE.DirectionalLight( 0xffffff, 1.5 );\n\t\tthis.ms_MainDirectionalLight.position.set( -0.2, 0.5, 1 );\n\t\tthis.ms_Scene.add( this.ms_MainDirectionalLight );\n\n\t\t// Add Black Pearl\n\t\tvar loader = new THREE.OBJMTLLoader( this.ms_Loader );\n\t\tthis.ms_BlackPearl = null;\n\t\tloader.load( 'models/BlackPearl/BlackPearl.obj', 'models/BlackPearl/BlackPearl.mtl', function ( object ) {\n\t\t\tobject.position.y = 20.0;\n\t\t\tif( object.children ) {\n\t\t\t\tfor( child in object.children ) {\n\t\t\t\t\tobject.children[child].material.side = THREE.DoubleSide;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tDEMO.ms_BlackPearlShip.add( object );\n\t\t\tDEMO.ms_BlackPearl = object;\n\t\t} );\n\n\t\t// Add rain\n\t\t{\n\t\t\tvar size = 128;\n\t\t\tvar rainTexture = new THREE.Texture();\n\t\t\trainTexture.generateMipmaps = false;\n\t\t\trainTexture.magFilter = THREE.LinearFilter;\n\t\t\trainTexture.minFilter = THREE.LinearFilter;\n\t\t\tthis.ms_ImageLoader.load( 'img/water-drop.png', function ( image ) {\n\t\t\t\t\trainTexture.image = image;\n\t\t\t\t\trainTexture.needsUpdate = true;\n\t\t\t} );\n\n\t\t\tvar rainShader = THREE.ShaderLib['rain'];\n\n\t\t\tvar rainMaterial = new THREE.ShaderMaterial({\n\t\t\t\tfragmentShader: rainShader.fragmentShader,\n\t\t\t\tvertexShader: rainShader.vertexShader,\n\t\t\t\tuniforms: rainShader.uniforms,\n\t\t\t\ttransparent: true,\n\t\t\t\tdepthWrite: false\n\t\t\t});\n\t\t\trainMaterial.uniforms.texture.value = rainTexture;\n\n\t\t\tthis.ms_RainGeometry = new THREE.Geometry();\n\t\t\tfor ( i = 0; i < 100; i++ )\n\t\t\t{\n\t\t\t\tvar vertex = new THREE.Vector3();\n\t\t\t\tvertex.x = Math.random() * 2.0 * size - size;\n\t\t\t\tvertex.y = Math.random() * 2.0 * size - size;\n\t\t\t\tvertex.z = Math.random() * size - size * 0.5;\n\t\t\t\tthis.ms_RainGeometry.vertices.push( vertex );\n\t\t\t}\n\t\t\tthis.ms_Rain = new THREE.Points( this.ms_RainGeometry, rainMaterial );\n\t\t\tthis.ms_Camera.add( this.ms_Rain );\n\t\t\tthis.ms_Rain.position.setZ( - size * 0.75 ) ;\n\t\t}\n\n\t\t// Initialize Clouds\n\t\tthis.ms_CloudShader = new CloudShader( this.ms_Renderer, 512 );\n\t\tthis.ms_CloudShader.cloudMesh.scale.multiplyScalar( 4.0 );\n\t\tthis.ms_Scene.add( this.ms_CloudShader.cloudMesh );\n\n\t\t// Initialize Ocean\n\t\tvar gsize = 512;\n\t\tvar res = 512;\n\t\tvar gres = 256;\n\t\tvar origx = -gsize / 2;\n\t\tvar origz = -gsize / 2;\n\t\tthis.ms_Ocean = new THREE.Ocean( this.ms_Renderer, this.ms_Camera, this.ms_Scene,\n\t\t{\n\t\t\tINITIAL_SIZE : 200.0,\n\t\t\tINITIAL_WIND : [ 10.0, 10.0 ],\n\t\t\tINITIAL_CHOPPINESS : 3.6,\n\t\t\tCLEAR_COLOR : [ 1.0, 1.0, 1.0, 0.0 ],\n\t\t\tSUN_DIRECTION : this.ms_MainDirectionalLight.position.clone(),\n\t\t\tOCEAN_COLOR: new THREE.Vector3( 0.35, 0.4, 0.45 ),\n\t\t\tSKY_COLOR: new THREE.Vector3( 10.0, 13.0, 15.0 ),\n\t\t\tEXPOSURE : 0.15,\n\t\t\tGEOMETRY_RESOLUTION: gres,\n\t\t\tGEOMETRY_SIZE : gsize,\n\t\t\tRESOLUTION : res\n\t\t} );\n\n\t\tthis.LoadSkyBox();\n\t\tthis.LoadMountains();\n\t},\n\n\tInitGui : function InitGui() {\n\n\t\t// Initialize UI\n\t\tvar gui = new dat.GUI();\n\t\tdat.GUI.toggleHide();\n\n\t\tgui.add( this.ms_Ocean, \"size\", 10, 2000 ).onChange( function( v ) {\n\t\t\tthis.object.size = v;\n\t\t\tthis.object.changed = true;\n\t\t} );\n\t\tgui.add( this.ms_Ocean.materialSpectrum.uniforms.u_choppiness, \"value\", 0.1, 8 ).name( \"choppiness\" );\n\t\tgui.add( this.ms_Ocean, \"windX\", -50, 50 ).onChange( function ( v ) {\n\t\t\tthis.object.windX = v;\n\t\t\tthis.object.changed = true;\n\t\t} );\n\t\tgui.add( this.ms_Ocean, \"windY\", -50, 50 ).onChange( function ( v ) {\n\t\t\tthis.object.windY = v;\n\t\t\tthis.object.changed = true;\n\t\t} );\n\t\tgui.add( this.ms_Ocean, \"exposure\", 0.0, 0.5 ).onChange( function ( v ) {\n\t\t\tthis.object.exposure = v;\n\t\t\tthis.object.changed = true;\n\t\t} );\n\t\tgui.add( DEMO.ms_Ocean.materialOcean, \"wireframe\" );\n\n\t\tvar demo = this;\n\n\t\t$( '#env-selector > ul > li[key=\"' + this.ms_Environment + '\"]' ).addClass( 'selected' );\n\t\t$( '#env-selector > ul > li' ).click( function() {\n\t\t\tdemo.UpdateEnvironment( $( this ).attr('key') );\n\n\t\t\t$( '#env-selector > ul > li' ).removeClass( 'selected' );\n\t\t\t$( this ).addClass( 'selected' );\n\t\t} ).each( function() {\n\t\t\t$( this ).html( '<a href=\"#' + $( this ).attr('key') + '\">' + $( this ).html() + '</a>' );\n\t\t} ) ;\n\n\t},\n\n\tInitCommands : function InitCommands() {\n\n\t\tvar LEFT = 37,\n\t\t\tUP = 38,\n\t\t\tRIGHT = 39,\n\t\t\tDOWN = 40;\n\n\t\tvar keyHandler = function keyHandler( action ) {\n\t\t\treturn function( event ) {\n\t\t\t\tvar key = event.which;\n\t\t\t\tif( key >= LEFT && key <= DOWN ) {\n\t\t\t\t\tswitch( key ) {\n\t\t\t\t\t\tcase UP : DEMO.ms_Commands.states.up = action ; break ;\n\t\t\t\t\t\tcase RIGHT : DEMO.ms_Commands.states.right = action ; break ;\n\t\t\t\t\t\tcase DOWN : DEMO.ms_Commands.states.down = action ; break ;\n\t\t\t\t\t\tcase LEFT : DEMO.ms_Commands.states.left = action ; break ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$( document ).keydown( keyHandler( true ) );\n\t\t$( document ).keyup( keyHandler( false ) );\n\n\t},\n\n\tLoadMountains : function LoadSkyBox() {\n\n\t\tvar demo = this;\n\n\t\tvar mountainTexture = new THREE.Texture();\n\t\tmountainTexture.generateMipmaps = false;\n\t\tmountainTexture.magFilter = THREE.LinearFilter;\n\t\tmountainTexture.minFilter = THREE.LinearFilter;\n\t\tthis.ms_ImageLoader.load( 'img/mountains.png', function ( image ) {\n\t\t\t\tmountainTexture.image = image;\n\t\t\t\tmountainTexture.needsUpdate = true;\n\t\t} );\n\n\n\t\tvar mountainsMaterial = new THREE.MeshBasicMaterial( {\n\t\t\tmap: mountainTexture,\n\t\t\ttransparent: true,\n\t\t\tside: THREE.BackSide,\n\t\t\tdepthWrite: false\n\t\t} );\n\n\t\tvar addMountain = function addMountain( size ) {\n\n\t\t\tvar moutains = new THREE.Mesh(\n\t\t\t\tnew THREE.CylinderGeometry( size, size, 35000, 32, 1, true ),\n\t\t\t\tmountainsMaterial\n\t\t\t);\n\t\t\tmoutains.position.y = 10000;\n\t\t\tdemo.ms_Scene.add( moutains );\n\n\t\t} ;\n\n\t\t// Add twice with different size in order to avoid some artifacts on the reflection\n\t\taddMountain( 120000 );\n\t\taddMountain( 150000 );\n\n\t\t// Add a black cylinder to hide the skybox under the water\n\t\tvar cylinder = new THREE.Mesh(\n\t\t\tnew THREE.CylinderGeometry( 150000, 150000, 150000, 32, 1, true ),\n\t\t\tnew THREE.MeshBasicMaterial( { color: new THREE.Color( 1, 1, 1 ), side: THREE.BackSide } )\n\t\t);\n\t\tcylinder.position.y = -80000;\n\t\tdemo.ms_Scene.add( cylinder );\n\n\t},\n\n\tLoadSkyBox : function LoadSkyBox() {\n\n\t\tvar cubeShader = THREE.ShaderLib['cube'];\n\n\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {\n\t\t\tfragmentShader: cubeShader.fragmentShader,\n\t\t\tvertexShader: cubeShader.vertexShader,\n\t\t\tuniforms: cubeShader.uniforms,\n\t\t\tside: THREE.BackSide\n\t\t} );\n\n\t\tthis.ms_SkyBox = new THREE.Mesh(\n\t\t\tnew THREE.BoxGeometry( 450000, 450000, 450000 ),\n\t\t\tskyBoxMaterial\n\t\t);\n\n\t\tthis.ms_Scene.add( this.ms_SkyBox );\n\n\t\t// https://stackoverflow.com/questions/3552944/how-to-get-the-anchor-from-the-url-using-jquery\n\t\tvar url = window.location.href, idx = url.indexOf(\"#\");\n\t\tvar anchor = idx != -1 ? url.substring(idx+1) : null;\n\t\tvar environmentParameter = anchor;\n\n\t\tif( environmentParameter !== null ) {\n\t\t\tthis.ms_Environment = environmentParameter;\n\t\t}\n\n\t\tthis.UpdateEnvironment( this.ms_Environment );\n\n\t},\n\n\tUpdateEnvironment : function UpdateEnvironment( key ) {\n\n\t\tvar textureName = '';\n\t\tvar textureExt = \".jpg\";\n\t\tvar directionalLightPosition = null;\n\t\tvar directionalLightColor = null;\n\t\tvar raining = false;\n\n\t\tswitch( key ) {\n\t\t\tcase 'night':\n\t\t\t\ttextureName = 'grimmnight';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( -0.3, 0.3, 1 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 1, 1, 1 );\n\t\t\t\training = true;\n\t\t\t\tbreak;\n\t\t\tcase 'morning':\n\t\t\t\ttextureName = 'clouds';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( -1, 0.5, 0.8 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 1, 0.95, 0.8 );\n\t\t\t\tbreak;\n\t\t\tcase 'day':\n\t\t\t\ttextureName = 'sky';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( -0.5, 0.5, -0.6 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 1, 0.95, 0.9 );\n\t\t\t\tbreak;\n\t\t\tcase 'cloudy':\n\t\t\t\ttextureName = 'miramar';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( 0.3, 1.0, 0.5 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 0.9, 0.95, 1 );\n\t\t\t\training = true;\n\t\t\t\tbreak;\n\t\t\tcase 'sunset':\n\t\t\t\ttextureName = 'sunset';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( -0.7, 0.2, -1 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 1, 0.8, 0.5 );\n\t\t\t\tbreak;\n\t\t\tcase 'interstellar':\n\t\t\t\ttextureName = 'interstellar';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( -0.7, 1.0, -0.4 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 0.8, 1.0, 0.95 );\n\t\t\t\tbreak;\n\t\t\tcase 'apocalypse':\n\t\t\t\ttextureName = 'violent_days';\n\t\t\t\tdirectionalLightPosition = new THREE.Vector3( 1, 0.3, 1 );\n\t\t\t\tdirectionalLightColor = new THREE.Color( 1, 0.85, 0.3 );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t};\n\n\t\tthis.ms_Environment = key;\n\t\tthis.ms_Raining = raining;\n\t\tthis.ms_MainDirectionalLight.position.copy( directionalLightPosition );\n\t\tthis.ms_MainDirectionalLight.color.copy( directionalLightColor );\n\t\tthis.ms_Ocean.materialOcean.uniforms.u_sunDirection.value.copy( this.ms_MainDirectionalLight.position );\n\t\tif ( raining ) {\n\t\t\tthis.ms_soundRain.play();\n\t\t}\n\t\telse {\n\t\t\tthis.ms_soundRain.pause();\n\t\t}\n\t\t\n\t\tvar sources = [\n\t\t\t'img/' + textureName + '_west' + textureExt,\n\t\t\t'img/' + textureName + '_east' + textureExt,\n\t\t\t'img/' + textureName + '_up' + textureExt,\n\t\t\t'img/' + textureName + '_down' + textureExt,\n\t\t\t'img/' + textureName + '_south' + textureExt,\n\t\t\t'img/' + textureName + '_north' + textureExt\n\t\t];\n\t\tvar images = [];\n\n\t\tvar cubeMap = new THREE.CubeTexture( images );\n\t\tcubeMap.flipY = false;\n\n\t\tvar imageLoader = this.ms_ImageLoader;\n\t\tvar loaded = 0;\n\t\tvar loadTexture = function ( i ) {\n\t\t\timageLoader.load( sources[ i ], function ( image ) {\n\t\t\t\tcubeMap.images[ i ] = image;\n\t\t\t\tloaded ++;\n\t\t\t\tif ( loaded === 6 ) {\n\t\t\t\t\tcubeMap.needsUpdate = true;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = sources.length; i < il; ++ i ) {\n\t\t\tloadTexture( i );\n\t\t}\n\t\t\n\t\tcubeMap.format = THREE.RGBFormat;\n\t\tcubeMap.generateMipmaps = false;\n\t\tcubeMap.magFilter = THREE.LinearFilter;\n\t\tcubeMap.minFilter = THREE.LinearFilter;\n\n\t\tthis.ms_SkyBox.material.uniforms['tCube'].value = cubeMap;\n\t},\n\n\tDisplay : function () {\n\n\t\tthis.ms_Renderer.render( this.ms_Scene, this.ms_Camera );\n\n\t},\n\n\tUpdate : function () {\n\n\t\t// Update camera position\n\t\tif( this.ms_Camera.position.y < 0.0 ) {\n\t\t\tthis.ms_Camera.position.y = 2.0;\n\t\t}\n\n\t\t// Update black ship displacements\n\t\tthis.UpdateCommands();\n\t\tthis.ms_GroupShip.rotation.y += this.ms_Commands.movements.angle;\n\t\tthis.ms_BlackPearlShip.rotation.z = -this.ms_Commands.movements.angle * 10.0;\n\t\tthis.ms_BlackPearlShip.rotation.x = this.ms_Commands.movements.speed * 0.1;\n\t\tvar shipDisplacement = (new THREE.Vector3(0, 0, -1)).applyEuler(this.ms_GroupShip.rotation).multiplyScalar( 10.0 * this.ms_Commands.movements.speed );\n\t\tthis.ms_GroupShip.position.add( shipDisplacement );\n\n\t\tvar currentTime = new Date().getTime();\n\t\tthis.ms_Ocean.deltaTime = ( currentTime - lastTime ) / 1000 || 0.0;\n\t\tlastTime = currentTime;\n\n\t\t// Update black ship movements\n\t\tif( this.ms_BlackPearl !== null )\n\t\t{\n\t\t\tvar animationRatio = 1.0 + this.ms_Commands.movements.speed * 1.0;\n\t\t\tthis.ms_BlackPearl.rotation.y = Math.cos( currentTime * 0.0008 ) * 0.05 - 0.025;\n\t\t\tthis.ms_BlackPearl.rotation.x = Math.sin( currentTime * 0.001154 + 0.78 ) * 0.1 + 0.05;\n\t\t}\n\n\t\t// Update rain\n\t\tif( this.ms_Raining ) {\n\t\t\tvar seed = 1;\n\t\t\tvar fastRandom = function fastRandom() {\n\t\t\t\t// https://stackoverflow.com/questions/521295/javascript-random-seeds\n\t\t\t\tvar x = Math.sin( seed++ ) * 10000;\n\t\t\t\treturn x - Math.floor( x );\n\t\t\t}\n\t\t\tfor( i in this.ms_RainGeometry.vertices )\n\t\t\t{\n\t\t\t\tvar speed = 4.0;\n\t\t\t\tthis.ms_RainGeometry.vertices[i].y -= fastRandom() * speed + speed;\n\t\t\t\tif( this.ms_RainGeometry.vertices[i].y < -50 )\n\t\t\t\t\tthis.ms_RainGeometry.vertices[i].y = 50;\n\t\t\t}\n\t\t\tthis.ms_Rain.rotation.set( -this.ms_Camera.rotation.x, -this.ms_Camera.rotation.y, -this.ms_Camera.rotation.z, \"ZYX\" );\n\t\t\tthis.ms_RainGeometry.verticesNeedUpdate = true;\n\t\t}\n\n\t\t// Render ocean reflection\n\t\tthis.ms_Camera.remove( this.ms_Rain );\n\t\tthis.ms_Ocean.render();\n\t\tif( this.ms_Raining )\n\t\t\tthis.ms_Camera.add( this.ms_Rain );\n\n\t\t// Updade clouds\n\t\tthis.ms_CloudShader.update();\n\n\t\t// Update ocean data\n\t\tthis.ms_Ocean.update();\n\t\t\n\t\tthis.ms_Controls.update();\n\t\tthis.Display();\n\n\t},\n\n\tUpdateCommands : function UpdateCommands() {\n\n\t\tvar states = this.ms_Commands.states;\n\n\t\t// Update speed\n\t\tvar targetSpeed = 0.0;\n\t\tif( states.up ) {\n\t\t\ttargetSpeed = 1.0;\n\t\t}\n\t\telse if( states.down ) {\n\t\t\ttargetSpeed = -0.5;\n\t\t}\n\t\tvar curSpeed = this.ms_Commands.movements.speed ;\n\t\tthis.ms_Commands.movements.speed = curSpeed + ( targetSpeed - curSpeed ) * 0.02;\n\n\t\t// Update angle\n\t\tvar targetAngle = 0.0;\n\t\tif( states.left ) {\n\t\t\ttargetAngle = Math.PI * 0.005;\n\t\t}\n\t\telse if( states.right ) {\n\t\t\ttargetAngle = -Math.PI * 0.005;\n\t\t}\n\t\tif( states.down ) {\n\t\t\ttargetAngle *= -1.0;\n\t\t}\n\t\t\n\t\tvar curAngle = this.ms_Commands.movements.angle ;\n\t\tthis.ms_Commands.movements.angle = curAngle + ( targetAngle - curAngle ) * 0.02;\n\n\t},\n\n\tResize : function ( inWidth, inHeight ) {\n\n\t\tthis.ms_Camera.aspect = inWidth / inHeight;\n\t\tthis.ms_Camera.updateProjectionMatrix();\n\t\tthis.ms_Renderer.setSize( inWidth, inHeight );\n\t\tthis.Display();\n\n\t}\n};\n"],"names":[],"version":3,"file":"index.a0129ec6.js.map","sourceRoot":"/__parcel_source_root/"}